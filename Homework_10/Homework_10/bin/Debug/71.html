<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin-when-crossorigin" />
    <meta name="description" content="很多技术人员在职业上对自己要求高，工作勤奋，承担越来越大的责任，最终得到信任，被提拔到管理岗位。但是往往缺乏专业的管理知识，在工作中不能从整体范围优化工作流程，仍然是“个人贡献者”的工作方式，遇到问题" />
    <meta property="og:description" content="很多技术人员在职业上对自己要求高，工作勤奋，承担越来越大的责任，最终得到信任，被提拔到管理岗位。但是往往缺乏专业的管理知识，在工作中不能从整体范围优化工作流程，仍然是“个人贡献者”的工作方式，遇到问题" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>从技术谈到管理，把系统优化的技术用到企业管理 - 小陆 - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=zS6-e1bxywlu3kpHvpr1J6MySwya3ztFtEnS7RYQ0Fk" />
    <link id="MainCss" rel="stylesheet" href="/skins/simpleclear/bundle-simpleclear.min.css?v=YwqKpZSlReWrFAl5bydbTTB3DX1yfsPdM9XzR5Ip8sU" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/simpleclear/bundle-simpleclear-mobile.min.css?v=gORgGj4k30_xdrBBjR8BlmIqd0gwMNLDu1WI_swQtPE" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/lane_cn/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/lane_cn/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/lane_cn/wlwmanifest.xml" />
    <script>
        var currentBlogId = 7835;
        var currentBlogApp = 'lane_cn';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'SimpleClear';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2020-09-17 02:55';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=yJQaJ16S00coMfzvh-NgF2zm2J87f5VfNamFdsnKHrc"></script>
    
    
    
</head>
<body class="has-navbar has-bannerbar">
    <a name="top"></a>
        <a target="_blank" href="https://www.aliyun.com/minisite/goods?userCode=swh7dvlt" onclick="ga('send', 'event', 'Link', 'click', 'aliyun-cps-blog-bannerbar-pc')">
            <div class="bannerbar aliyun forpc" style="background-size: contain;background-image: url(https://img2020.cnblogs.com/blog/35695/202104/35695-20210428221933214-737067094.jpg)">
            </div>
        </a>
        <div id="bannerbar" class="bannerbar-mobile formobile">
            <a href="https://www.aliyun.com/minisite/goods?userCode=swh7dvlt" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'aliyun-cps-blog-bannerbar-mobile')">
                <img src="https://img2020.cnblogs.com/blog/35695/202104/35695-20210428213541700-642740375.jpg" alt="" />
            </a>
        </div>
    <div id="top_nav" class="navbar forpc">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding"><a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="/images/logo.svg?v=R9M0WmLAIPVydmdzE2keuvnjl-bPR7_35oHqtiBzGsM" alt="博客园Logo" /></a></li>
                <li><a href="/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-sitehome')">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-q')">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-brands')">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-edu')">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3" />
                        <button type="submit" id="zzk_search_button">
                            <img src="/images/aggsite/search.svg" alt="搜索" />
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔">
                        <img id="new_post_icon" class="navbar-icon" src="/images/aggsite/newpost.svg" alt="写随笔" />
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                        <img id="myblog_icon" class="navbar-icon" src="/images/aggsite/myblog.svg" alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息">
                        <img id="msg_icon" class="navbar-icon" src="/images/aggsite/message.svg?v=J0WS2P2iPgaIVgXxcAhliw4AFZIpaTWxtdoNAv9eiCA" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="/images/aggsite/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="/images/lite-mode-check.svg" class="hide" /><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    
    <div id="main">
    <div id="header">
        
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/lane_cn/">一星期8天</a>
</h1>
<p id="tagline">Eight Days a Week</p>


    </div>
    <div id="post_detail">
<div class="post">
    <h2 class="postTitle">
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/lane_cn/p/13685179.html">
    <span>从技术谈到管理，把系统优化的技术用到企业管理</span>
    



</a>
</h2>
    <div class="postText"><div id="cnblogs_post_body" class="blogpost-body blogpost-body-html">
<p>很多技术人员在职业上对自己要求高，工作勤奋，承担越来越大的责任，最终得到信任，被提拔到管理岗位。但是往往缺乏专业的管理知识，在工作中不能从整体范围优化工作流程，仍然是“个人贡献者”的工作方式，遇到问题自己上，经常耽误了本职工作。于是翻了很多书，看了很多文章，学习了很多“为人处世的艺术”和“企业发展的战略”，最终把自己干成了研发部主管，技术却逐渐荒废。管理工作是什么呢，技术和管理是截然不同的两条发展方向吗？</p>
<p>不是的。技术和管理都要做到量化分析，全局优化，存在很多相似的方法。这里用一个系统性能优化的场景举个例子，大家可以体会一下：</p>
<p>公司里有一个程序，运行在10台服务器的集群上。现在业务量增加了，请求处理不完。老板把你找来，要你优化这个程序。接到这个头疼的任务，你把开发测试运维各个部门的人都找来开会想办法，有人说数据库该升级了，有人说代码写的太烂要优化，有人说机器太少再加5台，还有人说我们要改架构上云，上了云以后就再也没有这种问题了。你该听谁的呢？</p>
<p>先别着急动手。有一句话叫做“没有度量就没有优化”，首先要“度量”这个现象。先把设计人员找来，了解一下这个程序是什么功能，工作流程是什么样的。</p>
<p>程序架构：这个程序处理图片识别的业务，从网络端口接收图片，识别图片里面的信息，然后在图片库里进行对比，最后输出相似图片。处理过程是这样的：</p>
<p>&nbsp;</p>
<p><img src="https://img2020.cnblogs.com/blog/4701/202009/4701-20200917145230997-1857130510.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>搞清楚程序架构，接下来我们需要度量数据。有一些数据很容易得到，还有一些数据似乎没人搞得清。于是你给研发团队布置了一个任务，让他们在程序里面埋点，尽快收集一些数据指标。开发人员改了一版程序，部署上去。在生产线上跑了一天，得到一些数据指标：&nbsp;</p>
<ul>
<li>输入：每天需要处理100万张图片，这是从上游工序收集到的</li>
<li>识别函数：识别1张图片平均时间是0.5秒</li>
<li>比对函数：比对1个图片的平均时间是0.4秒</li>
</ul>
<p>现在我们计算一下：处理1张图片的时间是0.9秒（0.5 + 0.4），1台机器1天可以处理图片96000（86400 / 0.9），10 台机器1天可以处理图片96万（96000 * 10），达不到100万。要完成每天100万的处理量，需要服务器10.4台（100万 / 96000），约等于11台。</p>
<p>是不是告诉老板必须要买服务器了呢：“需要买1台服务器，带GPU的！”。先别着急。</p>
<p>我们分析一下程序运行过程：识别函数和比对函数是串行执行的。识别函数忙碌的时候，比对函数是空闲的，它在等待识别的结果。同样的，比对函数忙碌的时候，识别函数也是无事可做的。也就是说，服务器的资源并没有得到充分利用，GPU卡和数据库的资源都有很大的浪费。</p>
<p>怎样提高资源利用率呢？可以改变一下程序的架构，调整成下面这样：</p>
<p>&nbsp;</p>
<p><img src="https://img2020.cnblogs.com/blog/4701/202009/4701-20200917145256422-475990692.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>把原来的程序一分为二，分别部署在两台服务器上，中间用一个消息队列交换数据。现在两个程序都可以充分利用服务器的资源。我们再来计算一下吞吐量：&nbsp;</p>
<ul>
<li>程序X：处理一个图片需要0.5秒，1台服务器1天处理图片172800（86400 / 0.5），100万图片需要服务器 5.8 台（100万 / 172800），约等于6台。</li>
<li>程序Y：处理一个图片需要0.4秒，1台服务器1天处理图片216000（86400 / 0.4），100万图片需要服务器 4.6台（100万 / 216000），约等于5台。</li>
</ul>
<p>仍然需要服务器11台，好像没有什么改进嘛。我们再分析一下：原方案需要11台带GPU的服务器，现在只需要6台，我们省下了5块GPU卡，这已经是一笔不少的费用。</p>
<p>架构师又提供了一个信息：在原方案里面，识别函数和比对函数串行执行，所以只能用同样的并发线程数执行。新方案已经分离到两个程序中，所以比对函数就可以设置更高的并发线程数，可以提高到原来的4倍。</p>
<p>这是一个好消息，程序Y的吞吐量可以提高4倍，这样一来，只需要1.16台服务器就可以处理完100万数据，约等于2台。</p>
<p>按照改进后的架构，只需要6台带GPU的服务器，再加2台不带GPU的服务器，总计需要8台服务器。不仅可以完成处理任务，还可以预留一些GPU卡，以备以后业务发展。</p>
<p>例子说完了，以上就是优化一个IT系统运行效率的过程。其实，企业管理也是相似的过程，只是优化的对象不再是机器和程序，而是人的活动。在一家软件企业，有需求收集、产品研发、项目实施等多个流程，有时这些流程会有卡顿、缓慢的现象，看上去和一个IT系统的问题是一样的。有一个著名的问题是：“在你的团队里，只涉及一行代码的变更需要多久才能上线？” 从需求到交付，这个路程有多远。我们可能经常会遇到这样的问题：某个现场运维反馈了一个缺陷，看上去只是很小的问题，修复也不麻烦，却花了很长时间才解决。事后回顾这个问题，每个部门的人都有话要说：</p>
<ul>
<li>运维：我一发现这个问题，就在Jira平台上提出来了，当时开发也没有回复，我就下班了。</li>
<li>开发：我当时正在开发新版本的功能，写一段很复杂的代码。看到这个问题的时候，已经是下班时间了。运维只描述了问题现象，没有说明现场部署的版本。我不知道在哪个版本上修复这个问题，只好在最新的发布版上先把它改掉了，然后把包发给测试。我在Jira上也回了消息，要求运维把现场版本号发出来；</li>
<li>测试：我收到开发的包，打算做一下测试。整个集成环境已经升级了，我需要把测试环境恢复到老的版本。这事我搞了一上午，下午的时候搞了一遍测试，发现几个缺陷，把问题提给开发了。</li>
<li>开发：我收到测试提的Bug，修改以后又发了一个版。这次应该没问题了。</li>
<li>运维：环境上的包没有版本标识，我花了很长时间核对所有版本的Md5码，才找到了版本号，在Jira上回了。这个问题很紧急，我想尽快解决，于是就拿测试给我的最新版，想尝试安装一下。我不知道这个包能不能兼容现场的环境，只能试试看。我在预发布环境上搞了一天，也没把他装上去，看起来是不行的。</li>
<li>开发：我看到现场版本号，这是一个非常老的版本，已经一年多了。我进入这个项目才三个月，在微信上AT了好几个人。代码基线也不知道在哪里，找了很久才找到。修复之后已经很晚了。还是要交给测试测一下。</li>
<li>测试：集成环境还是要恢复一下，我搞了三个小时。测试确认没有问题，就交给运维了。</li>
<li>运维：我收到安装包，在预发布环境上试了一下，没什么问题。生产环境要麻烦一些，我一开始只更新了一个节点，发现问题仍然间歇性的出现。后来才知道要还有2个节点也要部署。这次搞了一天，下次再有这样的情况，我就知道怎么做了。</li>
</ul>
<p>从每个人的角度看，自己都很忙碌，花了很多时间解决问题。但是从缺陷解决的角度看，事情在不断的卡顿、等待。在这些劳动过程中，真正有效的、能产生价值的劳动占多少呢？这就是DevOps需要解决的价值流动问题，需要建立一套体系，衡量这个流程，不断优化它。</p>
<p>&nbsp;</p>
<p><img src="https://img2020.cnblogs.com/blog/4701/202009/4701-20200917145324270-1932864463.png" alt="" loading="lazy"></p>
<p>&nbsp;</p>
<p>从上面一个缺陷解决的过程来看，技术部门存在很多问题，有一些问题是单点的，比如：</p>
<ul>
<li>代码管理：代码基线不明确，版本无法回溯</li>
<li>发布管理：发布文档没有妥善保管</li>
<li>版本管理：版本号没有明确的烙印，编号不清楚。无法判断新老版本的兼容关系</li>
<li>基础设施管理：研发人员没有办法迅速得到基础设施，为了建立一个测试环境需要花很长时间</li>
<li>部署管理：测试人员手工部署，需要花很久才能完成一次部署</li>
<li>环境管理：现场的服务器上部署了哪些进程，没有一套管理办法，需要登录上去查看</li>
</ul>
<p>看到这些问题，是不是就可以开始改进了呢？还是不要着急。像优化一个IT系统一样，我们要搞清楚工作流程，然后度量这个流程，再整体优化。在整体情况不清楚的情况下，局部优化是没有用的，优化一个局部的效率，可能适得其反，造成更大的浪费。</p>
<p>把整体流程搞清楚，当然是存在很多困难的。一个大问题就是：企业工作流程不像IT系统流程一样清楚。IT系统一般有各种文档，至少有源代码可以查看。企业工作流程经常存在一些模糊的地方，部门和岗位职责的定义不是十分清楚。人也不会像程序一样“听话”，为了完成自己的工作任务，人是有创造性的。所以每个企业都要整理岗位和工作流程，努力把这些模糊的流程整理清楚，按照自己的业务特点制定一套流程规范，这是十分必要的工作。技术岗位上的人更熟悉实际的工作流程，他们走上管理岗位，在这方面是有优势的。</p>
<p>工作流程明确之后，就可以对流程节点进行度量。我们可以采用可视化技术对数据进行分析，比如看板、资源投入状态、任务燃尽图等等，寻找卡顿活动，判断瓶颈资源。这方面有一些科学的方法，软件行业也在从制造行业学习精益生产的理论。对于一个大规模的软件企业，在管理方面有所改善，形成的效率提升是巨大的。</p>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div></div>
    <p class="postfoot">posted on 
<span id="post-date">2020-09-17 14:55</span>&nbsp;
<a href="https://www.cnblogs.com/lane_cn/">小陆</a>&nbsp;
阅读(<span id="post_view_count">8151</span>)&nbsp;
评论(<span id="post_comment_count">26</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=13685179" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(13685179);return false;">收藏</a></p>
</div>


<script src="https://common.cnblogs.com/highlight/10.3.1/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 7835, cb_blogApp = 'lane_cn', cb_blogUserGuid = '428f310b-63cf-dd11-9e4d-001cf0cd104b';
    var cb_entryId = 13685179, cb_entryCreatedDate = '2020-09-17 14:55', cb_postType = 1;
    updatePostStats(
        [cb_entryId],
        function(id, count) { $("#post_view_count").text(count) },
        function(id, count) { $("#post_comment_count").text(count) })
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");
</script>
<a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="under-post-card">
        <div id='div-gpt-ad-1592365906576-0' style='width: 300px; height: 250px;'></div>
    </div>
    <div id="under_post_card1"></div>
    <div id="cnblogs_c2" class="under-post-card">
        <div id='div-gpt-ad-1592366332455-0' style='width: 468px; height: 60px;'></div>
    </div>
    <div id="under_post_card2"></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
       var commentManager = new blogCommentManager();
       commentManager.renderComments(0);
       fixPostBody();
       deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);       deliverT2();
       deliverC1C2();
       loadNewsAndKb();
       loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);       LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
       GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
       loadOptUnderPost();
       GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>

</div>


</div>
<div id="rightmenu">
    
<div id="my_links">
<h3>导航</h3>
<ul>
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/lane_cn/">
首页</a>
</li>

<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E5%B0%8F%E9%99%86">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/lane_cn/rss/">
订阅</a></li><!--<partial name="./Shared/_XmlLink.cshtml" model="Model" />-->
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>
</div>


    <div id="calendar">
        <div id="blog-calendar" style="display: none"></div>
    </div>
    <script>loadBlogDefaultCalendar();</script>
    <div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>
<div id="sidebar_c3"></div>
    <div id="blog_stats_place_holder"><script>loadBlogStats();</script></div>
    <div id="blog-sidecolumn"></div>
    <script>loadBlogSideColumn();</script>
    <div id="footer">
	Powered by: 
	<br />
	
	<a href="https://www.cnblogs.com/" id="footer_site_link">博客园</a>
	<br />
	Copyright &copy; 2021 小陆
<br /><span id="poweredby">Powered by .NET 5.0 on Kubernetes</span>

</div>


</div>
    

    <input type="hidden" id="antiforgery_token" value="CfDJ8L-rpLgFVEJMgssCVvNUAjv07P3-iKr3TRtTcyXEoy7OeCjdpK9rV3MA2BL2aQtNlDzwoZ8atc4BuIqmdeuhmDWna78FkjbFFNAHYqRh7I951IbrgA8_i9685sj_zsnRVYquIOzGGE8QPM8aKFwgY8w" />
</body>
</html>
