<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin-when-crossorigin" />
    <meta name="description" content="机缘巧合之下看到了stevenjoezhang/live2d-widget的多交互live2d，有点心动但是模型太少不太合口味；又是一个机缘巧合之下看到了Eikanya/Live2d-model中有收" />
    <meta property="og:description" content="机缘巧合之下看到了stevenjoezhang/live2d-widget的多交互live2d，有点心动但是模型太少不太合口味；又是一个机缘巧合之下看到了Eikanya/Live2d-model中有收" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>我的自定义多交互live2d折腾经历 - c10udlnk - 博客园</title>
    <link id="favicon" rel="shortcut icon" href="//common.cnblogs.com/favicon.svg" type="image/svg+xml" />
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=zS6-e1bxywlu3kpHvpr1J6MySwya3ztFtEnS7RYQ0Fk" />
    
    <link type="text/css" rel="stylesheet" href="https://www.cnblogs.com/c10udlnk/custom.css?v=7MKwNk9BuDspFVQ5LKcRpIwcbog=" />
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/SimpleMemory/bundle-SimpleMemory-mobile.min.css" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/c10udlnk/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/c10udlnk/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/c10udlnk/wlwmanifest.xml" />
    <script>
        var currentBlogId = 639196;
        var currentBlogApp = 'c10udlnk';
        var cb_enable_mathjax = false;
        var isLogined = false;
        var isBlogOwner = false;
        var skinName = 'SimpleMemory';
        var visitorUserId = '';
    </script>
        <script>
            var currentPostDateAdded = '2021-05-03 11:26';
        </script>
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=yJQaJ16S00coMfzvh-NgF2zm2J87f5VfNamFdsnKHrc"></script>
    
    
    
</head>
<body class="no-navbar">
    <a name="top"></a>
        <div id="bannerbar" class="bannerbar-mobile formobile">
            <a href="https://www.aliyun.com/minisite/goods?userCode=swh7dvlt" target="_blank" onclick="ga('send', 'event', 'Link', 'click', 'aliyun-cps-blog-bannerbar-mobile')">
                <img src="https://img2020.cnblogs.com/blog/35695/202104/35695-20210428213541700-642740375.jpg" alt="" />
            </a>
        </div>
    <div id="top_nav" class="navbar forpc navbar-custom">
        <nav id="nav_main" class="navbar-main">
            <ul id="nav_left" class="navbar-list navbar-left">
                <li class="navbar-branding"><a href="https://www.cnblogs.com/" title="开发者的网上家园"><img src="/images/logo.svg?v=R9M0WmLAIPVydmdzE2keuvnjl-bPR7_35oHqtiBzGsM" alt="博客园Logo" /></a></li>
                <li><a href="/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-sitehome')">首页</a></li>
                <li><a href="https://news.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-news')">新闻</a></li>
                <li><a href="https://q.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-q')">博问</a></li>
                <li><a id="nav_brandzone" href="https://brands.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-brands')">专区</a></li>
                <li><a href="https://ing.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-ing')">闪存</a></li>
                <li><a href="https://edu.cnblogs.com/" onclick="ga('send', 'event', 'Link', 'click', 'skin-navbar-edu')">班级</a></li>
            </ul>
            <ul id="nav_right" class="navbar-list navbar-right">
                <li>
                    <form id="zzk_search" class="navbar-search" action="https://zzk.cnblogs.com/s" method="get">
                        <input name="w" id="zzk_search_input" placeholder="代码改变世界" type="text" tabindex="3" />
                        <button type="submit" id="zzk_search_button">
                            <img src="/images/aggsite/search.svg" alt="搜索" />
                        </button>
                    </form>
                </li>
                <li id="navbar_login_status" class="navbar-list">
                    <a class="navbar-user-info navbar-blog" href="https://i.cnblogs.com/EditPosts.aspx?opt=1" alt="写随笔" title="写随笔">
                        <img id="new_post_icon" class="navbar-icon" src="/images/aggsite/newpost.svg" alt="写随笔" />
                    </a>
                    <a id="navblog-myblog-icon" class="navbar-user-info navbar-blog" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx" alt="我的博客" title="我的博客">
                        <img id="myblog_icon" class="navbar-icon" src="/images/aggsite/myblog.svg" alt="我的博客" />
                    </a>
                    <a class="navbar-user-info navbar-message navbar-icon-wrapper" href="https://msg.cnblogs.com/" alt="短消息" title="短消息">
                        <img id="msg_icon" class="navbar-icon" src="/images/aggsite/message.svg?v=J0WS2P2iPgaIVgXxcAhliw4AFZIpaTWxtdoNAv9eiCA" alt="短消息" />
                        <span id="msg_count" style="display: none"></span>
                    </a>
                    <div id="user_info" class="navbar-user-info dropdown">
                        <a class="dropdown-button" href="https://home.cnblogs.com/">
                            <img id="user_icon" class="navbar-avatar" src="/images/aggsite/avatar-default.svg" alt="用户头像" />
                        </a>
                        <div class="dropdown-menu">
                            <a id="navblog-myblog-text" href="https://passport.cnblogs.com/GetBlogApplyStatus.aspx">我的博客</a>
                            <a href="https://home.cnblogs.com/">我的园子</a>
                            <a href="https://account.cnblogs.com/settings/account">账号设置</a>
                            <a href="javascript:void(0)" id="navbar_lite_mode_toggle" title="简洁模式会使用简洁款皮肤显示所有博客">
    简洁模式 <img id="navbar_lite_mode_on" src="/images/lite-mode-check.svg" class="hide" /><span id="navbar_lite_mode_spinner" class="hide">...</span>
</a>
                            <a href="javascript:void(0)" onclick="account.logout();">退出登录</a>
                        </div>
                    </div>
                    <a class="navbar-anonymous" href="https://account.cnblogs.com/signup/">注册</a>
                    <a class="navbar-anonymous" href="javascript:void(0);" onclick="account.login()">登录</a>
                </li>
            </ul>
        </nav>
    </div>

    
    <!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/c10udlnk/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/c10udlnk/">c10udlnk</a>
</h1>
<h2>r3ver5e f0r fun?</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/c10udlnk/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/c10udlnk">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="javascript:void(0)" data-rss="https://www.cnblogs.com/c10udlnk/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			<div id="blog_stats_place_holder"><script>loadBlogStats();</script></div>
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->
<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2 vertical-middle" href="https://www.cnblogs.com/c10udlnk/p/14727173.html">
    <span>我的自定义多交互live2d折腾经历</span>
    



</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                    <div id="cnblogs_post_description" style="display: none">
        机缘巧合之下看到了stevenjoezhang/live2d-widget的多交互live2d，有点心动但是模型太少不太合口味；又是一个机缘巧合之下看到了Eikanya/Live2d-model中有收集解包食物语的live2d模型，发现了本命菜，顿时动力++，感觉能结合live2d-widget提供的cdn/api接口来将心仪的模型导入进去，折腾两个晚上终于成功了（
    </div>
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
<p>在<a href="https://m0d1.top/" target="_blank">@m0d1</a> 大佬的督促(?)下有了这篇复盘。不过因为可能很多地方讲得不全面+理解不够深入，故不打算把这篇当成是教程/指南，那就算是一个指北吧= =</p>
<p>（划重点：不是教程！不是教程！不是教程！</p>
<p>省流简介：机缘巧合之下看到了<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank">stevenjoezhang/live2d-widget</a>的多交互live2d，有点心动但是模型太少不太合口味；又是一个机缘巧合之下看到了<a href="https://github.com/Eikanya/Live2d-model" target="_blank">Eikanya/Live2d-model</a>中有收集解包食物语的live2d模型，发现了本命菜，顿时动力++，感觉能结合live2d-widget提供的cdn/api接口来将心仪的模型导入进去，折腾两个晚上终于成功了呜呜呜呜呜。</p>

<p>效果见我的个人hexo博客：<a href="https://c10udlnk.top/" target="_blank">https://c10udlnk.top/</a></p>
<p>P.S. 本篇指北面向melody主题（<a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank">Molunerfinn/hexo-theme-melody: A simple &amp; beautiful &amp; fast theme for Hexo.</a>）。</p>
<p>本篇指北涉及的Github项目：</p>
<ul>
<li>
<p><a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank">EYHN/hexo-helper-live2d: Add the Sseexxyyy live2d to your hexo!</a></p>
</li>
<li>
<p><a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank">stevenjoezhang/live2d-widget: 把萌萌哒的看板娘抱回家 (ノ≧∇≦)ノ | Live2D widget for web platform</a></p>
</li>
<li>
<p><a href="https://github.com/fghrsh/live2d_api" target="_blank">fghrsh/live2d_api: Live2D 看板娘插件 (https://www.fghrsh.net/post/123.html) 上使用的后端 API</a></p>
</li>
<li>
<p><a href="https://github.com/Eikanya/Live2d-model" target="_blank">Eikanya/Live2d-model: Live2d model collection</a></p>
</li>
</ul>
<h1 id="模型准备">模型准备</h1>
<h2 id="使用前人整理的模型">使用前人整理的模型</h2>
<p>指路：<a href="https://github.com/Eikanya/Live2d-model" target="_blank">Eikanya/Live2d-model: Live2d model collection</a></p>
<p>这里收集了提取自各种手游的live2d模型，强烈安利！</p>
<p>食用方法在对应文件夹里，这里我用的是他的食物语包（食物语的美工我疯狂吹好吗！），文件夹内说明是由于没有配置文件需要在想用的模型文件夹内自行配置<code>.model.json</code>，具体在各项应该填什么都写在下面代码的注释里了。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112400799-1305395583.png" alt="image-20210502123326566" loading="lazy"></p>
<pre><code class="language-json">{ // 默认配置文件，这里用我用的100034_baozaifan为例
    "expression":[ // /模型/expression文件夹内的各文件
        {
            "file":"expression/chijing.exp.json",
            "name":"chijing.exp.json"
        },
        {
            "file":"expression/haixiu.exp.json",
            "name":"haixiu.exp.json"
        },
        {
            "file":"expression/kaixin.exp.json",
            "name":"kaixin.exp.json"
        },
        {
            "file":"expression/idle.exp.json",
            "name":"idle.exp.json"
        },
        {
            "file":"expression/nanguo.exp.json",
            "name":"nanguo.exp.json"
        },
        {
            "file":"expression/shengqi.exp.json",
            "name":"shengqi.exp.json"
        },
        {
            "file":"expression/wunai.exp.json",
            "name":"wunai.exp.json"
        }
    ],
    "model":"model.moc", // /模型文件夹的model.moc文件
    "motions":{ // /模型/action文件夹内的各文件
        "":[
            {
                "file":"action/fumaozi.mtn"
            },
            {
                "file":"action/idle.mtn"
            },
            {
                "file":"action/sikao.mtn"
            }
        ]
    },
    "textures":[ // /模型文件夹内的texture文件
        "texture_00.png"
    ],
	"physics":"moc/physics.json", // /模型/moc文件夹的physics文件
    "version":"Sample 1.0.0"
}
</code></pre>
<p>自此对某个模型的配置完成。</p>
<h2 id="自己动手提取">自己动手提取</h2>
<p>当然，如果没有在上面的仓库里找到你想用的live2d模型，可以选择自己动手提取，不过由于各种手游对live2d模型的文件规范不太一样，故可能需要稍作修改。</p>
<p>动手提取的方法也很简单，解压手游的apk包，然后在assets文件夹（apk包里一般用来放原生资源的地方）内搜索<code>live2d</code>，看到类似名字的文件夹就是放着资源的地方，这里还是拿食物语做例子。</p>
<p>apk包解压以后：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112401212-784240112.png" alt="image-20210502122532979" loading="lazy"></p>
<p>在<code>./assets</code>中搜索<code>live2d</code>有</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112401600-1923772699.png" alt="image-20210502122614107" loading="lazy"></p>
<p>可以看到这里的<code>./live2dcharacter</code>就是存放模型的地方，打开可以看到</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112401876-1867393853.png" alt="image-20210502122645889" loading="lazy"></p>
<p>这些就是我们的模型啦~</p>
<p>当然稍作修改的地方就靠自己了hhh，可以参考那个仓库里多几个文件夹的live2d的文件布局试试。</p>
<h1 id="交互少的小白版live2d">交互少的小白版live2d</h1>
<p>接下来就分两条路走啦，分别是<code>交互少的小白版live2d</code>和<code>交互多的大白版(x)live2d</code>。</p>
<p>本part面向<strong>懒得折腾 / 少交互就够用</strong>的人群，如想使用博客效果中（<a href="https://c10udlnk.top/" target="_blank">https://c10udlnk.top/</a>）这种live2d，直接忽略这里跳到下一个part就好。</p>
<p>按照melody主题提供的教程（<a href="https://molunerfinn.com/hexo-theme-melody-doc/zh-Hans/additional-package-support.html#live2d%E5%8A%A8%E7%94%BB%E6%A8%A1%E5%9E%8B%E6%8C%82%E4%BB%B6" target="_blank">额外依赖库支持 | hexo-theme-melody</a>），在blog的根目录下运行<code>npm install --save hexo-helper-live2d</code>来安装live2d插件。</p>
<p>然后按照<a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank">EYHN/hexo-helper-live2d: Add the Sseexxyyy live2d to your hexo!</a>这里的a方法添加自定义模型。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112402101-261411451.png" alt="image-20210502124548048" loading="lazy"></p>
<p>具体如下：</p>
<p>先在博客根目录下创建一个<code>/live2d_models</code>的文件夹，</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112402360-1039522829.png" alt="image-20210502124807487" loading="lazy"></p>
<p>然后将刚刚下载的模型复制到该文件夹下：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112402601-1243114550.png" alt="image-20210502125043478" loading="lazy"></p>
<p>然后更改<code>/_config.yml</code>，在末尾添加：</p>
<pre><code class="language-yaml"># 官方的默认例子，具体各项配置看仓库的readme
live2d:
  enable: true
  scriptFrom: local
  pluginRootPath: live2dw/
  pluginJsPath: lib/
  pluginModelPath: assets/
  tagMode: false
  log: false
  model:
    use: 100034_baozaifan #要使用的模型名称（文件夹名）
  display:
    position: right
    width: 150
    height: 300
  mobile:
    show: true
  react:
    opacity: 0.7
</code></pre>
<p>然后更新博客就可以看到萌萌哒的live2d啦~</p>
<p>（温馨提示：因为缓存刷新较慢，<code>hexo d</code>部署上去以后可能要好久才能看到效果，所以可以先用<code>hexo s</code>代替<code>hexo d</code>，调整完效果以后最后再用<code>hexo d</code>部署就好。）</p>
<p>如果看不到模型的话一定是<strong>因为没配置好index文件（<code>.model.json</code>），手动指路$1.1</strong></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112402928-917137665.png" alt="image-20210502133515509" loading="lazy"></p>
<h1 id="交互多的大白版xlive2d">交互多的大白版(x)live2d</h1>
<p>如果你之前运行过<code>npm install --save hexo-helper-live2d</code>安装了hexo-helper-live2d插件的话，建议使用<code>npm uninstall hexo-helper-live2d</code>将其卸载，当然<strong>如果你想拥有两只不同种类live2d</strong>，那当我没说。</p>
<p>本部分有参考issue<a href="https://github.com/Molunerfinn/hexo-theme-melody/issues/214" target="_blank">[第三方支持]加入一个更多功能的live2d · Issue #214</a>，但是因为时间久远/版本问题对有些细节稍作修改。</p>
<h2 id="安装live2d-widget">安装live2d-widget</h2>
<ol>
<li>
<p>下载<a href="https://github.com/stevenjoezhang/live2d-widget" target="_blank">stevenjoezhang/live2d-widget: 把萌萌哒的看板娘抱回家 (ノ≧∇≦)ノ | Live2D widget for web platform</a>中的各文件，并解压到主题根目录source文件夹下（以melody主题为例，解压到<code>/node_modules/hexo-theme-melody/source</code>目录下；有些主题的根目录在<code>/themes/主题名/source</code>）。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112403268-1014699724.png" alt="image-20210502132028912" loading="lazy"></p>
</li>
<li>
<p>修改<code>/node_modules/hexo-theme-melody/source/live2d-widget/autoload.js</code>，将<code>const live2d_path = "https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/";</code>改为<code>const live2d_path = "/live2d-widget/";</code>。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112403479-233742669.png" alt="image-20210502132526638" loading="lazy"></p>
</li>
<li>
<p>在<code>/node_modules/hexo-theme-melody/layout/includes/additional-js.pug</code>文件末尾添加<code>script(src=url_for('/live2d-widget/autoload.js'))</code></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112403737-506758850.png" alt="image-20210502132743419" loading="lazy"></p>
</li>
<li>
<p>在<code>/_config.melody.yml</code>末尾添加：</p>
</li>
</ol>
<pre><code class="language-yaml">live2d:
  enable: true
</code></pre>
<p>至此便能看到项目本身自带的模型了：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112403976-22087271.png" alt="image-20210502133414267" loading="lazy"></p>
<h2 id="常用配置说明">常用配置说明</h2>
<p>模型的大小、位置、格式和文本内容等配置，需要自行设置<code>/node_modules/hexo-theme-melody/source/live2d-widget</code>中的<code>waifu-tips.js</code> 、<code>waifu-tips.json</code>和<code>waifu.css</code>，这里提一些各文件里常用的配置。</p>
<p>（这里如果用<code>hexo s</code>调整模型的话将会很方便，直接刷新就能看到最新效果）</p>
<p>在<a href="https://github.com/c10udlnk/someFixedConfigs/tree/main/live2d_cfgWithHexo" target="_blank">someFixedConfigs/live2d_cfgWithHexo</a>放了一下自己的配置，主要针对melody主题改了一些selector，伸手党替换文件后可直接食用。</p>
<h3 id="waifu-tipsjs">waifu-tips.js</h3>
<p>这里是模型加载启动/点击工具栏相应按钮时的行为和文本内容定义，具体对应可以对照参考原模型的行为，比如</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112404379-1613061177.png" alt="image-20210502134116740" loading="lazy"></p>
<p>这个部分是用来显示用户点回本页面时显示的文本，其余同理。</p>
<h3 id="waifu-tipsjson">waifu-tips.json</h3>
<p>这里是除了上面js里定义的文本以外的其余文本内容，同样可以对照参考原模型猜测来进行修改。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112404630-2003319113.png" alt="image-20210502134338823" loading="lazy"></p>
<p>值得注意的是，这个文件里分了几大块，架构大概是：</p>
<pre><code class="language-json">{
	"mouseover": [{ // 鼠标悬停在某个特定元素时显示的文本
		"selector": "...",
		"text": "..."
	}],
	"click": [{ // 鼠标点击某个特定元素时显示的文本
		"selector": "...",
		"text": "..."
	}],
	"seasons": [{ // 在特定日期显示的文本
		"date": "01/01",
		"text": "..."
	}]
}

</code></pre>
<p><code>text</code>这里很显然是填显示的文本。</p>
<p><code>date</code>是指定的特定日期。</p>
<p>至于<code>selector</code>就类似于CSS里的<a href="https://www.w3school.com.cn/cssref/css_selectors.asp" target="_blank">CSS选择器</a>，是用来指定元素类型的。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112404966-1885416197.png" alt="image-20210502135731220" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112405237-1552314559.png" alt="image-20210502214537634" loading="lazy"></p>
<p>这里可以直接用默认的，当然更建议自己更改（因为不同主题对不同元素的tag/class/id好多都不一样，如果没有自定义的话用起来很多都没办法触发）。</p>
<h3 id="waifucss">waifu.css</h3>
<p>CSS可以堪称是改大小/位置/格式的重头戏，想要让模型按照自己的想法显示在页面上，就得在这一块下功夫。</p>
<p>（当然，CSS有些设置和布局挺玄学的，发现加了某语句没作用的情况建议自行搜索or多调试）。</p>
<p>这边点几个大概率需要配置的常用点，其他的可以自己查css的各种语法来调整，或者在仓库的<a href="https://github.com/stevenjoezhang/live2d-widget/issues" target="_blank">issue</a>里查有没有相同需求的（甚至可以自己提issue。</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112405521-1438012225.png" alt="image-20210502214904779" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112405854-1111152927.png" alt="image-20210502215144485" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112406145-1670891792.png" alt="image-20210502223056063" loading="lazy"></p>
<p>（<code>#waifu #live2d</code>这里强调是画布大小，上面没标清楚懒得改了hhh）</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112406502-1653193646.png" alt="image-20210502223156816" loading="lazy"></p>
<h2 id="运用cdn添加自定义模型">运用CDN添加自定义模型</h2>
<p>当然，想要添加之前下载的自定义模型，走到这一步还不够，还得往下多走一步。</p>
<p>感谢<a href="http://fxizenta.design/" target="_blank">@Fxizenta</a> 大佬的提醒，这里参考<a href="https://blog.csdn.net/qq_38877888/article/details/103995674" target="_blank">使用免费CDN服务加速Github博客_Shy_tom的博客-CSDN博客</a>，用github的免费cdn服务来实现我们的自定义需求（顺便加速）。</p>
<blockquote>
<p>本来想着把api部署到博客本地上然后调用的，后来才想起来hexo博客是静态博客（不能发response包= =），感谢大佬提前部署到服务器上但最后没用上的api。</p>
</blockquote>
<p>先把提供的api接口仓库（<a href="https://github.com/fghrsh/live2d_api" target="_blank">fghrsh/live2d_api: Live2D 看板娘插件 (https://www.fghrsh.net/post/123.html) 上使用的后端 API</a>）fork一下：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112406804-781821770.png" alt="image-20210502234947049" loading="lazy"></p>
<p>然后在本地把这个仓库clone下来，方便通过本地更改</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112407062-356741106.png" alt="image-20210502235141186" loading="lazy"></p>
<p>依次点击，将git地址复制下来，然后在powershell运行：</p>
<pre><code class="language-powershell">git clone 刚刚复制下来的内容
</code></pre>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112407283-1152836432.png" alt="image-20210502235339823" loading="lazy"></p>
<p>等clone完成以后打开文件夹，需要关注的是两个地方是<code>live2d_api/model_list.json</code>和<code>live2d_api/model</code>文件夹。</p>
<p><code>live2d_api/model_list.json</code>里放的是需要展示的模型列表和刚换出来时的问候语：</p>
<pre><code class="language-json">{
    "models": [
        "model内的各模型文件夹名",
        ...
    ],
    "messages": [
        "对应的问候语",
        ...
    ]
}
</code></pre>
<p>比如我这边分别在末尾新增煲仔饭相关：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112407510-97622784.png" alt="image-20210503004236824" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112407728-1226420278.png" alt="image-20210503004259238" loading="lazy"></p>
<p><code>live2d_api/model</code>文件夹则存放着模型，在这里放入我们的自定义模型：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112407964-1108481076.png" alt="image-20210503004534436" loading="lazy"></p>
<p>这里就要把模型文件夹内之前的<code>.model.json</code>文件名改成<code>index.json</code>，并且增加一些内容（这里依旧是以煲仔饭模型为例，需要更改的地方在注释标出）：</p>
<pre><code class="language-json">{
    "expression":[
        {
            "file":"expression/chijing.exp.json",
            "name":"chijing.exp.json"
        },
        {
            "file":"expression/haixiu.exp.json",
            "name":"haixiu.exp.json"
        },
        {
            "file":"expression/kaixin.exp.json",
            "name":"kaixin.exp.json"
        },
        {
            "file":"expression/idle.exp.json",
            "name":"idle.exp.json"
        },
        {
            "file":"expression/nanguo.exp.json",
            "name":"nanguo.exp.json"
        },
        {
            "file":"expression/shengqi.exp.json",
            "name":"shengqi.exp.json"
        },
        {
            "file":"expression/wunai.exp.json",
            "name":"wunai.exp.json"
        }
    ],
    "layout":{ // 新增 调整模型位置及长宽
        "center_x": 0,
        "center_y": -0.16,
        "width": 1.8,
        "height": 2.5
    },
    "hit_areas_custom":{ // 新增 模型的点击感应位置
        "head_x":[-0.4, 0.9], // 头部判定
        "head_y":[0.4, 0.6],
        "body_x":[-0.4, 0.5], // 身体判定
        "body_y":[0.4, -0.9]
    },
    "model":"model.moc",
    "motions":{ // 有修改，新增触发对应表情时的行为
        "idle":[ // 空闲时动作
            {"file":"action/idle.mtn"}
        ],
        "flick_head":[ // 点击头部时动作
            {"file":"action/fumaozi.mtn"}
        ],
        "tap_body":[ // 点击身体时动作
            {"file":"action/sikao.mtn"}
        ]
    },
    "textures":[
        "texture_00.png"
    ],
	"physics":"moc/physics.json",
    "version":"Sample 1.0.0"
}
</code></pre>
<p>更改完以后将本地内容推上github上，在powershell的该目录下运行：</p>
<pre><code class="language-powershell">git add . ; git commit -m "add new model" ; git push
</code></pre>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112408185-923103782.png" alt="image-20210503004750884" loading="lazy"></p>
<p>然后在github仓库这里release一下：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112408481-1475243404.png" alt="image-20210503005135961" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112408721-1662525861.png" alt="image-20210503005325669" loading="lazy"></p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112409135-359038814.png" alt="image-20210503005412152" loading="lazy"></p>
<p>然后把<code>/node_modules/hexo-theme-melody/source/live2d-widget/autoload.js</code>中的：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112409428-2127526799.png" alt="image-20210503005704929" loading="lazy"></p>
<p>改成：</p>
<pre><code class="language-js">cdnPath: "https://cdn.jsdelivr.net/gh/用户名/live2d_api@版本号/"
</code></pre>
<p>比如我这边就是：</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112409660-1048660663.png" alt="image-20210503010001354" loading="lazy"></p>
<p>（注意这里如果不行的话把用户名的大写都转成小写试试，可能是对用户名的规范使用问题）。</p>
<p>然后更新博客就能看到想见的人啦~</p>
<p><img src="https://img2020.cnblogs.com/blog/2183122/202105/2183122-20210503112409893-359154935.png" alt="image-20210503010713533" loading="lazy"></p>

</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2021-05-03 11:26</span>&nbsp;
<a href="https://www.cnblogs.com/c10udlnk/">c10udlnk</a>&nbsp;
阅读(<span id="post_view_count">18</span>)&nbsp;
评论(<span id="post_comment_count">0</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=14727173" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(14727173);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/10.3.1/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 639196, cb_blogApp = 'c10udlnk', cb_blogUserGuid = '3bcd2f82-bc0e-42fa-cc8d-08d86f2e9a84';
    var cb_entryId = 14727173, cb_entryCreatedDate = '2021-05-03 11:26', cb_postType = 1;
    updatePostStats(
        [cb_entryId],
        function(id, count) { $("#post_view_count").text(count) },
        function(id, count) { $("#post_comment_count").text(count) })
    zoomManager.apply("#cnblogs_post_body img:not(.code_img_closed):not(.code_img_opened)");
</script>
<a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <div id="cnblogs_c1" class="under-post-card">
        <div id='div-gpt-ad-1592365906576-0' style='width: 300px; height: 250px;'></div>
    </div>
    <div id="under_post_card1"></div>
    <div id="cnblogs_c2" class="under-post-card">
        <div id='div-gpt-ad-1592366332455-0' style='width: 468px; height: 60px;'></div>
    </div>
    <div id="under_post_card2"></div>
    <div id="HistoryToday" class="under-post-card"></div>
    <script type="text/javascript">
       var commentManager = new blogCommentManager();
       commentManager.renderComments(0);
       fixPostBody();
       deliverBigBanner();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);       deliverT2();
       deliverC1C2();
       loadNewsAndKb();
       loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);       LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
       GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
       loadOptUnderPost();
       GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->
	<div id="sideBar">
		<div id="sideBarMain">
			<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>
<div id="sidebar_c3"></div>
			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2021 c10udlnk
<br /><span id="poweredby">Powered by .NET 5.0 on Kubernetes</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <div id="cnzzProtocol"  style="display: none;">
    <span class="id_cnzz_stat_icon" id='cnzz_stat_icon_1279580482'></span>
    <script src='https://v1.cnzz.com/z_stat.php?id=1279580482&online=1&show=line' type='text/javascript'></script>
</div>
    </div>

    <input type="hidden" id="antiforgery_token" value="CfDJ8L-rpLgFVEJMgssCVvNUAjuAxpzn5isDm9tDR584NAg-AZnjFUIJ2-Jn6Z5MjrxwmgzohkAlp_6Jqn-kEzTQRKvQ38NvCyvAqNNTcrcI-9CPAXN6dnhIoESw71FP3ilLQYjKFwvIeu8GC8XLZZV_5NY" />
</body>
</html>
